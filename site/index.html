<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>ðŸ¦¥ pygmysizes ðŸ¦¥</title>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css"
			rel="stylesheet"
		/>
		<style>
			html,
			body {
				height: 100%;
			}
			body {
				display: flex;
				flex-direction: column;
			}
			header {
				display: flex;
				align-items: center;
				justify-content: center;
				flex-wrap: wrap;
				padding-top: 5vh;
				padding-bottom: 5vh;
			}
			body > main {
				flex: 1;
			}
			ul {
				padding-left: 20px;
			}
			.bg-blue-100 {
				background-color: #f3f8ff;
			}
			.card > img {
				width: 100%;
				height: auto;
			}
			.card > p:first-of-type:last-of-type::first-line {
				font-size: 1.2em;
			}
			/* fade image in after load */
			[data-pygmy],
			[data-pygmy-loading] {
				opacity: 0;
			}
			[data-pygmy-loaded] {
				opacity: 1;
				transition: opacity 300ms;
			}
		</style>
	</head>
	<body class="bg-blue-100">
		<header>
			<div class="col">
				<h1 class="display-1 text-center">ðŸ¦¥</h1>
			</div>
			<div class="col-12 text-center">
				<h2 class="display-4">pygmysizes</h2>
			</div>
			<div class="col">
				<h3 class="text-muted text-center">
					A micro-library for lazyloading images
				</h3>
			</div>
		</header>
		<main class="pb-5">
			<section class="container">
				<div class="row justify-content-center align-items-center gy-5">
					<div class="col-10 col-lg-8">
						<div class="card shadow-lg rounded-3 p-5">
							<p>
								pygmysizes (named after the pygmy sloth) is a
								lazysizes mimic that offers only the skeleton of
								features that lazysizes offers. The only core
								system passed on is the events.
							</p>
							<p>You can find it in a two paackage types:</p>
							<ul>
								<li>693b (Modern)</li>
								<li>766b (UMD)</li>
							</ul>
						</div>
					</div>
					<div class="col-10 col-lg-8">
						<div class="card shadow-lg rounded-3 p-5">
							<img
								data-pygmy="https://source.unsplash.com/Tw8yUiNvwnc/500x500"
								alt=""
								loading="lazy"
								width="500"
								height="500"
							/>
						</div>
					</div>
					<div class="col-10 col-lg-8">
						<div class="card shadow-lg rounded-3 p-5 py-4">
							<p class="h4 decoration-underline">Goals</p>
							<ul>
								<li>Size Budget: ~1kb</li>
								<li>Self-Initialize</li>
								<li>60fps/Jank Free</li>
								<li>Use âœ¨ modern âœ¨ code</li>
							</ul>
						</div>
					</div>
					<div class="col-10 col-lg-8">
						<div class="card shadow-lg rounded-3 p-5">
							<img
								data-pygmy="https://source.unsplash.com/VcRbMldAFU8/500x500"
								alt=""
								loading="lazy"
								width="500"
								height="500"
							/>
						</div>
					</div>
					<div class="col-10 col-lg-8">
						<div class="card shadow-lg rounded-3 p-5 py-4">
							<p class="h4">Settings:</p>
							<p>
								To change the defaults alter these values on the
								<code>window.pygmyConfig</code> object before
								the script loads.
							</p>
							<pre><code>{
  selector: '[loading="lazy"]',
  src: 'pygmy',
  srcset: 'pygmyset',
  sizes: 'pygmysizes',
  preload: 'pygmyload',
  rpc: 'pygmyrpc',
  options: {
    // IntersectionObserver options
  }
}</code></pre>
						</div>
					</div>
					<div class="col-10 col-lg-8">
						<div class="card shadow-lg rounded-3 p-5">
							<img
								data-pygmy="https://source.unsplash.com/GTXvpZ2eTdA/500x500"
								alt=""
								loading="lazy"
								width="500"
								height="500"
							/>
						</div>
					</div>

					<svg
						width="12px"
						height="12px"
						version="1.1"
						viewBox="0 0 100 100"
						xmlns="http://www.w3.org/2000/svg"
					>
						<g>
							<path d="m12.5 45.832h64.582v8.332h-64.582z" />
							<path
								d="m59.168 77.918l-5.8359-5.8359 22.086-22.082-22.086-22.082 5.8359-5.8359 27.914 27.918z"
							/>
						</g>
					</svg>
					<div class="col-10 col-lg-8">
						<div class="card shadow-lg rounded-3 p-5 py-4">
							<p class="h4 decoration-underline">API:</p>
							<p>
								While pygmysizes is a mimic, the attributes are
								slightly different. (Just to avoid conflict)<br />
							</p>
							<ul>
								<li>
									<code>data-src</code> is replaced by
									<code>data-pygmy</code>
								</li>
								<li>
									<code>data-srcset</code> is replaced by
									<code>data-pygmyset</code>
								</li>
								<li>
									<code>data-sizes</code> is replaced by
									<code>data-lazysizes</code>
								</li>
								<li>
									<code>.lazypreload</code>
									is replaced by <code>data-pygmyload</code>
								</li>
							</ul>
						</div>
					</div>
					<div class="col-10 col-lg-8">
						<div class="card shadow-lg rounded-3 p-5">
							<img
								data-pygmy="https://source.unsplash.com/vIqqlNOeP-Y/500x500"
								alt=""
								loading="lazy"
								width="500"
								height="500"
							/>
						</div>
					</div>
					<div class="col-10 col-lg-8">
						<div class="card shadow-lg rounded-3 p-5">
							<img
								data-pygmy="https://source.unsplash.com/qmYTIcJ82qk/500x500"
								alt=""
								loading="lazy"
								width="500"
								height="500"
							/>
						</div>
					</div>
					<div class="col-10 col-lg-8">
						<div class="card shadow-lg rounded-3 p-5 py-4">
							<p class="h4 mb-3">I was preloaded</p>
							<img
								data-pygmy="https://source.unsplash.com/l4QSO66AwmE/500x500"
								data-pygmyload
								alt=""
								loading="lazy"
								width="500"
								height="500"
							/>
							<p class="h5 text-muted mt-3">
								But I still had dataset values changed by
								pygmysizes
							</p>
						</div>
					</div>
				</div>
			</section>
		</main>
		<script
			type="module"
			src="../dist/index.modern.js"
			async
			defer
		></script>
		<script type="module">
			Rainbow.extend(
				'javascript',
				[
					{ name: 'selector', pattern: /\$(?=\.|\()/g },
					{ name: 'support', pattern: /\b(window|document)\b/g },
					{ name: 'keyword', pattern: /\b(export|default|from)\b/g },
					{ name: 'function.call', pattern: /\b(then)(?=\()/g },
					{ name: 'variable.language.this', pattern: /\bthis\b/g },
					{
						name: 'variable.language.super',
						pattern: /super(?=\.|\()/g,
					},
					{
						name: 'storage.type',
						pattern: /\b(const|let|var)(?=\s)/g,
					},
					{
						matches: { 1: 'support.property' },
						pattern: /\.(length|node(Name|Value))\b/g,
					},
					{
						matches: { 1: 'support.function' },
						pattern: /(setTimeout|setInterval)(?=\()/g,
					},
					{
						matches: { 1: 'support.method' },
						pattern: /\.(getAttribute|replace|push|getElementById|getElementsByClassName|setTimeout|setInterval)(?=\()/g,
					},
					{
						name: 'string.regexp',
						matches: {
							1: 'string.regexp.open',
							2: {
								name: 'constant.regexp.escape',
								pattern: /\\(.){1}/g,
							},
							3: 'string.regexp.close',
							4: 'string.regexp.modifier',
						},
						pattern: /(\/)((?![*+?])(?:[^\r\n\[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*\])+)(\/)(?!\/)([igm]{0,3})/g,
					},
					{
						matches: { 1: 'storage.type', 3: 'entity.function' },
						pattern: /(var)?(\s|^)(\S+)(?=\s?=\s?function\()/g,
					},
					{
						matches: { 1: 'keyword', 2: 'variable.type' },
						pattern: /(new)\s+(?!Promise)([^\(]*)(?=\()/g,
					},
					{
						name: 'entity.function',
						pattern: /(\w+)(?=:\s{0,}function)/g,
					},
					{ name: 'constant.other', pattern: /\*(?= as)/g },
					{
						matches: { 1: 'keyword', 2: 'constant.other' },
						pattern: /(export)\s+(\*)/g,
					},
					{
						matches: {
							1: 'storage.type.accessor',
							2: 'entity.name.function',
						},
						pattern: /(get|set)\s+(\w+)(?=\()/g,
					},
					{
						matches: { 2: 'entity.name.function' },
						pattern: /(^\s*)(\w+)(?=\([^\)]*?\)\s*\{)/gm,
					},
					{
						matches: {
							1: 'storage.type.class',
							2: 'entity.name.class',
							3: 'storage.modifier.extends',
							4: 'entity.other.inherited-class',
						},
						pattern: /(class)\s+(\w+)(?:\s+(extends)\s+(\w+))?(?=\s*\{)/g,
					},
					{ name: 'storage.type.function.arrow', pattern: /=&gt;/g },
					{
						name: 'support.class.promise',
						pattern: /\bPromise(?=(\(|\.))/g,
					},
				],
				'generic',
			),
				Rainbow.addAlias('js', 'javascript');
		</script>
	</body>
</html>
